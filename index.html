<!DOCTYPE html>
<html>
<body id="body" onscroll="getScrol()">

<style>
table {
	border: 1px solid black;
	table-layout: fixed;
}

.table-body tr {
	height: 100vh;
}

.table-body td {
	text-align: center;
	border: 1px solid black;
	width: 50%;
}

.videos-hover {
	z-index: -1;
}
</style>

<table class="table-body">
	<tr>
		<td>
			<img id="ph_porzellan_center" src="website_bilder/porzellan/porzellan_1.jpg" alt="porzellan" width="70%">
		</td>
		<td>
			<p>Jahrtausend alte Mineralien ...</p>
		</td>
	</tr>
	
	<tr>
		<td>
			<p>... durch Hände geformt ...</p>
		</td>
		<td>
			<img id="ph_raku_plate" class="videos-hover" src="website_bilder/raku/raku_0.jpg" alt="raku_plate" width="70%">
			<img id="ph_raku_bowl" src="website_bilder/raku/raku_1.png" alt="raku_bowl" width="0%">
		</td>
	</tr>
	
	<tr id="row_steinzeug">
		<td>
			<img id="img_steinzeug" src="website_bilder/steinzeug/small/steinzeug_1.png" alt="steinzeug" width="40%" style="position: fixed;">
		</td>
		<td>
			<p>... durch Feuer gefestigt ...</p>
		</td>
	</tr>
	
	<tr>
		<td>
			<p>... Angela Börnicke ...</p>
		</td>
		<td>
			<img src="website_bilder/steinzeug/steinzeug_1.png" width="40%">
		</td>
	</tr>
</table>

<script>

var pi = Math.PI;

window.onscroll = function() {
	var scroll = window.pageYOffset;
	rotate_steinzeug(scroll);
	rotate_porzellan(scroll);
	move_raku(scroll);
};

function rotate_porzellan(scroll) {
	var img_steinzeug_index = [7,6,5,4,3,2,1];
	var img_height = document.getElementById("ph_porzellan_center").height;
	var img_position_center = document.getElementById("ph_porzellan_center").getBoundingClientRect().top + img_height/2;
	
	var first_frame = window.innerHeight / 2; 
	var last_frame = 0; 
	var fade_out_start = first_frame / 3;
	var fade_out_end = last_frame;
	
	var element = 6;
	if (img_position_center < last_frame) {
		element = 0;
	} else if (img_position_center < first_frame) {
		element = Math.floor(easeInOut(img_position_center, last_frame, first_frame, 0, img_steinzeug_index.length));
	}

	var opacity = 1;
	if (img_position_center < fade_out_end) {
		opacity = 0;
	} else if (img_position_center < fade_out_start) {
		opacity = easeInOut(img_position_center, last_frame, first_frame, 0, 1);
	}
	
	var path = "website_bilder/porzellan/porzellan_";
	var index = img_steinzeug_index[element].toString();
	var type = ".jpg";
	var path = path.concat(index, type);
	
	document.getElementById("ph_porzellan_center").src = path;
	document.getElementById("ph_porzellan_center").style.opacity = opacity;
}

function rotate_steinzeug(scroll) {
	var img_steinzeug_index = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
	var element = img_steinzeug_index.length - 1;
	
	var img_height = document.getElementById("img_steinzeug").height;
	var window_height = window.innerHeight; 
	var window_width = window.innerWidth; 
	
	var img_position_top = document.getElementById("img_steinzeug").getBoundingClientRect().top + img_height;
	
	var row_height = document.getElementById("row_steinzeug").offsetHeight;
	var y_abs_start = document.getElementById("row_steinzeug").getBoundingClientRect().top + scroll - window_height + row_height * 0.2;
	var y_abs_end = document.getElementById("row_steinzeug").getBoundingClientRect().top *+ scroll - window_height + row_height * 0.8;
	
	var fade_in_end = y_abs_start + (y_abs_end - y_abs_start) * 0.4;
	var fade_out_start = y_abs_start + (y_abs_end - y_abs_start) * 0.6;
	
	var left = window_width * 0.2;
	var left_finish = window_width * 0.2;
	
	var height = window_height * 0.4;
	var height_finish = window_height * 0.9;
	
	if (scroll > y_abs_end) {
		element = 0;
		left = left_finish;
		height = height_finish;
	} else if (scroll > y_abs_start) {
		left = easeInOut(scroll, y_abs_start, y_abs_end, left, left_finish);
		height = easeInOut(scroll, y_abs_start, y_abs_end, height, height_finish);
		element = Math.floor( easeInOut(scroll, y_abs_start, y_abs_end, 0,1) * (element + 1) );
	}
	
	var opacity = 0;
	if (scroll > y_abs_end) {
		opacity = 0;
	} else if (scroll > fade_out_start) {
		opacity = easeInOut(scroll, fade_out_start, y_abs_end, 1, 0);
	} else if (scroll > fade_in_end) {
		opacity = 1;
	} else if (scroll > y_abs_start) {
		opacity = easeInOut(scroll, y_abs_start, fade_in_end, 0, 1);
	}
		
	var path = "website_bilder/steinzeug/small/steinzeug_";
	var index = img_steinzeug_index[element].toString();
	var type = ".png";
	var path = path.concat(index, type);
	
	document.getElementById("img_steinzeug").src = path;
	document.getElementById("img_steinzeug").style.top = window_height / 2 - img_height / 2 + "px";
	document.getElementById("img_steinzeug").style.left = left + "px";
	document.getElementById("img_steinzeug").style.opacity = opacity;
}

function easeInOut(x, xmin, xmax, ymin, ymax) {
	var x_new = pi * (x-xmin) / (xmax-xmin) 
	return (0.5 * ( Math.cos(x_new - pi) + 1) ) * (ymax - ymin) + ymin;
}

function easeLinear(x, xmin, xmax, ymin, ymax) {
	return m*x;
}

function move_raku(scroll) {
	var img_height = document.getElementById("ph_raku_plate").height;
	var img_pos = document.getElementById("ph_raku_plate").getBoundingClientRect().top;
	var window_height = window.innerHeight; 
		
	var space_min = img_height / 3.6;
	var space_max = img_height;
	
	var first_frame = window_height; 
	var last_frame = window_height / 2; 
	
	var fade_in_start = first_frame;
	var fade_in_end = last_frame;
	var fade_out_start = img_height*1.3;
	var fade_out_end = 0;
		
	var space = space_max;
	if (img_pos < last_frame) {
		space = space_min;
	} else if (img_pos < first_frame) {
		space = easeInOut(img_pos, last_frame, first_frame, space_min, space_max);
	}	
	
	var opacity = 0;
	if (img_pos > fade_in_start) {
		opacity = 0;
	} else if (img_pos > fade_in_end) {
		opacity = easeInOut(img_pos, fade_in_end, fade_in_start, 1, 0);
	} else if (img_pos > fade_out_start) {
		opacity = 1;
	} else if (img_pos > fade_out_end) {
		opacity = easeInOut(img_pos, fade_out_end, fade_out_start, 0, 1);
	}
	

	var img_position = img_pos + scroll - space;
	document.getElementById("ph_raku_bowl").style.top = img_position + "px";
	document.getElementById("ph_raku_bowl").style.opacity = opacity;
	document.getElementById("ph_raku_plate").style.opacity = opacity;
}
</script>

</body>
</html>
